/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package totvschallenge;

import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

/**
 *
 * @author rafaelabud
 */
public class Aux {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) throws FileNotFoundException, IOException, JSONException {
        String everything;
        BufferedReader br = new BufferedReader(new FileReader("/Users/rafaelabud/Documents/TOTVSChallenge/sample2.txt"));
        try {
            StringBuilder sb = new StringBuilder();
            String line = br.readLine();

            while (line != null) {
                sb.append(line);
                sb.append(System.lineSeparator());
                line = br.readLine();
            }
            everything = sb.toString();
        } finally {
            br.close();
        }
        //System.out.println(everything);
        // TODO code application logic here
        JSONArray obj = new JSONArray(everything);
        for(int t = 0;t<obj.length();t++)
        {
            JSONObject A = new JSONObject(obj.get(t).toString());
//            System.out.println(obj.get(0));
            JSONObject Complemento = A.getJSONObject("complemento"); 
            String valorTotal = Complemento.get("valorTotal").toString();
            System.out.println(valorTotal);
            JSONArray dets = A.getJSONArray("dets"); 
            Double total = 0.0;
            for(int a = 0;a<dets.length();a++)
            {
                String Item = dets.get(a).toString();
                JSONObject B = new JSONObject(Item);
                JSONObject Prod = new JSONObject(B.get("prod").toString());
                //System.out.println(Prod);
                System.out.println(Prod.get("vUnCom"));
                total = total + Double.parseDouble(Prod.get("vUnCom").toString()); 

            }
            System.out.println("Total "+total);
            JSONObject infAdic = A.getJSONObject("infAdic"); 
            System.out.println(infAdic.get("infCpl"));

            //JSONObject ide = A.getJSONObject("ide"); 
            //JSONObject dh = ide.getJSONObject("dhEmi"); 
            //System.out.println(dh);
            
        }
//        String id = obj.getString("complemento");
        
    }
    
}
